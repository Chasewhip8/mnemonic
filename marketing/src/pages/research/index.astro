---
import Base from '../../layouts/Base.astro';
import SEO from '../../components/SEO.astro';
import { concepts, layers, failureModes } from '../../data/research';

const grouped = {
  a: concepts.filter(c => c.layer === 'a'),
  b: concepts.filter(c => c.layer === 'b'),
  c: concepts.filter(c => c.layer === 'c'),
};

const layerColors = {
  a: { border: 'border-brass/20', bg: 'bg-brass/5', text: 'text-brass', glow: 'rgba(201, 169, 97, 0.1)' },
  b: { border: 'border-blue-500/20', bg: 'bg-blue-500/5', text: 'text-blue-400', glow: 'rgba(96, 165, 250, 0.1)' },
  c: { border: 'border-emerald-500/20', bg: 'bg-emerald-500/5', text: 'text-emerald-400', glow: 'rgba(52, 211, 153, 0.1)' },
};
---

<Base title="Memory Interface Research — deja" variant="content">
  <SEO
    slot="head"
    title="Memory Interface Research — deja"
    description="20 explorations of how humans and agents might interact with persistent memory. From filing cabinets to mycelial networks — charting the future of agent-human interfaces."
    keywords="memory interface, agent UX, human-agent interaction, memory visualization, research"
    path="/research"
    type="article"
    section="Research"
    breadcrumbs={[{ name: 'Research', path: '/research' }]}
  />

  <!-- Hero -->
  <section class="pt-16 pb-12">
    <div class="max-w-3xl">
      <div class="font-mono text-[11px] font-bold tracking-[0.2em] uppercase text-brass mb-4">Research</div>
      <h1 class="font-serif-sc text-4xl md:text-6xl font-bold tracking-tight m-0 mb-5 leading-[1.1]">
        Memory Interface<br />Explorations
      </h1>
      <p class="font-serif text-xl text-chrome-dark m-0 mb-6 leading-relaxed max-w-2xl">
        20 ways humans and agents might interact with persistent memory.
        Ordered from conventional to radical, across three layers of complexity.
        Each one is a standalone research page with interactive demonstrations.
      </p>
      <div class="flex flex-wrap gap-3">
        <a href="#layer-a" class="font-mono text-[11px] px-3 py-1.5 rounded-sm border border-brass/20 bg-brass/5 text-brass hover:bg-brass/10 transition-colors">
          Layer A · Human Patterns
        </a>
        <a href="#layer-b" class="font-mono text-[11px] px-3 py-1.5 rounded-sm border border-blue-500/20 bg-blue-500/5 text-blue-400 hover:bg-blue-500/10 transition-colors">
          Layer B · Agent Memory
        </a>
        <a href="#layer-c" class="font-mono text-[11px] px-3 py-1.5 rounded-sm border border-emerald-500/20 bg-emerald-500/5 text-emerald-400 hover:bg-emerald-500/10 transition-colors">
          Layer C · Multi-Agent
        </a>
        <a href="#when-memory-breaks" class="font-mono text-[11px] px-3 py-1.5 rounded-sm border border-chrome-dark/20 bg-steel/50 text-chrome-dark/70 hover:text-chrome hover:border-brass/20 transition-colors">
          When memory breaks
        </a>
      </div>
    </div>
  </section>

  <!-- Thesis -->
  <section class="mb-16 max-w-2xl">
    <div class="border-b border-brass/10 pb-10">
      <h2 class="font-serif-sc text-xl font-bold m-0 mb-4">The thesis</h2>
      <div class="font-serif text-chrome-dark leading-relaxed space-y-4 *:text-balance *:block">
        <p class="">
          Memory is not data. A filing cabinet treats it as rows. But memory has time, shape, health, relevance,
          narrative, causality, hierarchy, flow, contradiction, and topology. The interface you choose reveals
          which dimension you think matters most.
        </p>
        <p class="">
          These 20 concepts aren't mutually exclusive. A real product combines several: a filing cabinet for
          admin, a debugger for development, push-based recall for daily use, and a contradiction board for governance.
        </p>
        <p class="">
          This research explores where the next iteration of agent-to-human interfaces will land.
          Each page is standalone, interactive, and built on deja's existing primitives.
        </p>
      </div>
    </div>
  </section>

  <!-- Progress line -->
  <div class="relative h-px mb-16">
    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-brass/30 to-transparent"></div>
  </div>

  <!-- Layer A -->
  <section id="layer-a" class="mb-20 scroll-mt-24">
    <div class="flex items-baseline gap-4 mb-2">
      <span class="font-mono text-[13px] font-bold tracking-widest text-brass">A</span>
      <h2 class="font-serif-sc text-2xl font-bold m-0">{layers.a.title}</h2>
    </div>
    <p class="font-serif text-chrome-dark mb-8 max-w-xl">{layers.a.subtitle}</p>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {grouped.a.map((c, i) => (
        <a href={`/research/${c.slug}`}
           class="research-card group block bg-steel border border-brass/10 rounded-sm overflow-hidden hover:border-brass/25 transition-all duration-300"
           style={`--delay: ${i * 60}ms`}>
          <div class="relative p-5">
            <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
            <div class="flex items-center gap-2 mb-3">
              <span class="font-mono text-[10px] font-bold text-brass/40 group-hover:text-brass/70 transition-colors">{String(c.number).padStart(2, '0')}</span>
            </div>
            <h3 class="font-serif font-semibold text-base m-0 mb-2 group-hover:text-brass transition-colors">{c.title}</h3>
            <p class="font-serif text-[13px] text-chrome-dark/60 m-0 leading-relaxed">{c.tagline}</p>
          </div>
        </a>
      ))}
    </div>
  </section>

  <!-- Layer B -->
  <section id="layer-b" class="mb-20 scroll-mt-24">
    <div class="flex items-baseline gap-4 mb-2">
      <span class="font-mono text-[13px] font-bold tracking-widest text-blue-400">B</span>
      <h2 class="font-serif-sc text-2xl font-bold m-0">{layers.b.title}</h2>
    </div>
    <p class="font-serif text-chrome-dark mb-8 max-w-xl">{layers.b.subtitle}</p>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {grouped.b.map((c, i) => (
        <a href={`/research/${c.slug}`}
           class="research-card group block bg-steel border border-blue-500/10 rounded-sm overflow-hidden hover:border-blue-500/25 transition-all duration-300"
           style={`--delay: ${i * 60}ms`}>
          <div class="relative p-5">
            <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-500/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
            <div class="flex items-center gap-2 mb-3">
              <span class="font-mono text-[10px] font-bold text-blue-400/40 group-hover:text-blue-400/70 transition-colors">{String(c.number).padStart(2, '0')}</span>
            </div>
            <h3 class="font-serif font-semibold text-base m-0 mb-2 group-hover:text-blue-400 transition-colors">{c.title}</h3>
            <p class="font-serif text-[13px] text-chrome-dark/60 m-0 leading-relaxed">{c.tagline}</p>
          </div>
        </a>
      ))}
    </div>
  </section>

  <!-- Layer C -->
  <section id="layer-c" class="mb-20 scroll-mt-24">
    <div class="flex items-baseline gap-4 mb-2">
      <span class="font-mono text-[13px] font-bold tracking-widest text-emerald-400">C</span>
      <h2 class="font-serif-sc text-2xl font-bold m-0">{layers.c.title}</h2>
    </div>
    <p class="font-serif text-chrome-dark mb-8 max-w-xl">{layers.c.subtitle}</p>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {grouped.c.map((c, i) => (
        <a href={`/research/${c.slug}`}
           class="research-card group block bg-steel border border-emerald-500/10 rounded-sm overflow-hidden hover:border-emerald-500/25 transition-all duration-300"
           style={`--delay: ${i * 60}ms`}>
          <div class="relative p-5">
            <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-emerald-500/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
            <div class="flex items-center gap-2 mb-3">
              <span class="font-mono text-[10px] font-bold text-emerald-400/40 group-hover:text-emerald-400/70 transition-colors">{String(c.number).padStart(2, '0')}</span>
            </div>
            <h3 class="font-serif font-semibold text-base m-0 mb-2 group-hover:text-emerald-400 transition-colors">{c.title}</h3>
            <p class="font-serif text-[13px] text-chrome-dark/60 m-0 leading-relaxed">{c.tagline}</p>
          </div>
        </a>
      ))}
    </div>
  </section>

  <!-- When memory breaks -->
  <section id="when-memory-breaks" class="mb-20 scroll-mt-24">
    <div class="flex items-baseline gap-4 mb-2">
      <span class="font-mono text-[13px] font-bold tracking-widest text-chrome-dark/50">—</span>
      <h2 class="font-serif-sc text-2xl font-bold m-0">When memory breaks</h2>
    </div>
    <p class="font-serif text-chrome-dark mb-8 max-w-xl">
      Scenario-driven research. Each page: what went wrong, what was needed, the minimal interface that would have fixed it.
    </p>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {failureModes.map((fm, i) => (
        <a href={`/research/${fm.slug}`}
           class="research-card group block bg-steel border border-brass/10 rounded-sm overflow-hidden hover:border-brass/25 transition-all duration-300"
           style={`--delay: ${i * 60}ms`}>
          <div class="relative p-5">
            <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
            <div class="flex items-center gap-2 mb-3">
              <span class="font-mono text-[10px] font-bold text-brass/40 group-hover:text-brass/70 transition-colors">{fm.number}</span>
            </div>
            <h3 class="font-serif font-semibold text-base m-0 mb-2 group-hover:text-brass transition-colors">{fm.title}</h3>
            <p class="font-serif text-[13px] text-chrome-dark/60 m-0 leading-relaxed">{fm.tagline}</p>
          </div>
        </a>
      ))}
    </div>
  </section>
</Base>

<style>
  .research-card {
    animation: card-enter 0.4s ease-out backwards;
    animation-delay: var(--delay, 0ms);
    box-shadow:
      inset 0 1px 0 rgba(201, 169, 97, 0.05),
      0 2px 0 var(--color-void-deep),
      0 4px 12px rgba(0, 0, 0, 0.4);
  }

  .research-card:hover {
    transform: translateY(-1px);
    box-shadow:
      inset 0 1px 0 rgba(201, 169, 97, 0.1),
      0 3px 0 var(--color-void-deep),
      0 8px 24px rgba(0, 0, 0, 0.5);
  }

  @keyframes card-enter {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
