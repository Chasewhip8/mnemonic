<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Patterns — deja</title><meta name="description" content="deja is an open source Cloudflare Worker that gives agents durable recall. Store, query, and inject learnings with precision."><!-- Open Graph --><meta property="og:type" content="website"><meta property="og:url" content="https://deja.coey.dev/patterns/"><meta property="og:title" content="Patterns — deja"><meta property="og:description" content="deja is an open source Cloudflare Worker that gives agents durable recall. Store, query, and inject learnings with precision."><meta property="og:image" content="https://deja.coey.dev/meta.jpg"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://deja.coey.dev/patterns/"><meta name="twitter:title" content="Patterns — deja"><meta name="twitter:description" content="deja is an open source Cloudflare Worker that gives agents durable recall. Store, query, and inject learnings with precision."><meta name="twitter:image" content="https://deja.coey.dev/meta.jpg"><link rel="canonical" href="https://deja.coey.dev/patterns/"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Spectral+SC:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/docs.BY4USMJ0.css"></head> <body class="m-0 relative min-h-screen"> <!-- Header --> <header class="sticky top-0 z-10 backdrop-blur-md backdrop-saturate-50 bg-void/95 border-b border-brass/10 shadow-[0_1px_0_rgba(201,169,97,0.1)]"> <div class="flex justify-between items-center px-6 py-4 max-w-[1160px] mx-auto"> <a href="/" class="font-mono font-bold uppercase tracking-[0.32em] text-[11px] hover:text-brass transition-colors">deja</a> <nav class="flex gap-[18px] text-[13px] text-chrome-dark"> <a href="/docs" class="hover:text-brass transition-colors">Docs</a> <a href="/patterns" class="hover:text-brass transition-colors">Patterns</a> <a href="https://github.com/acoyfellow/deja" target="_blank" rel="noreferrer" class="hover:text-brass transition-colors">GitHub</a> </nav> </div> </header> <main class="relative z-[1] max-w-[1160px] mx-auto px-6 pb-20">  <section class="pt-16 pb-8"> <div class="font-mono text-[11px] font-bold tracking-widest uppercase text-brass mb-4">Patterns</div> <h1 class="font-serif-sc text-4xl md:text-5xl font-bold tracking-tight m-0 mb-4">
How to talk to an agent with deja
</h1> <p class="font-serif font-light text-lg text-chrome-dark max-w-3xl">
These prompts work when your agent has deja in its system prompt. Speak naturally — the agent handles the API.
</p> </section> <section class="mt-12"> <h2 class="font-mono text-xs font-bold uppercase tracking-[0.2em] text-brass mb-4">Recall</h2> <div class="grid gap-3"> <div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"what was the last thing we worked on?"</code> <span class="font-serif text-sm text-chrome-dark">Agent queries recent memories to restore context.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"what do you know about deployments?"</code> <span class="font-serif text-sm text-chrome-dark">Semantic search across all learnings for a topic.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"anything relevant before I start this?"</code> <span class="font-serif text-sm text-chrome-dark">Pre-task injection of related memories.</span> </div> </div> </div> </section><section class="mt-12"> <h2 class="font-mono text-xs font-bold uppercase tracking-[0.2em] text-brass mb-4">Learning</h2> <div class="grid gap-3"> <div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"remember this for next time"</code> <span class="font-serif text-sm text-chrome-dark">Explicit signal to store current context as a learning.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"that worked — save it"</code> <span class="font-serif text-sm text-chrome-dark">Positive reinforcement, high confidence learning.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"don&#39;t do that again"</code> <span class="font-serif text-sm text-chrome-dark">Negative learning from failure, stored for avoidance.</span> </div> </div> </div> </section><section class="mt-12"> <h2 class="font-mono text-xs font-bold uppercase tracking-[0.2em] text-brass mb-4">Organization</h2> <div class="grid gap-3"> <div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"organize your memory how you see fit"</code> <span class="font-serif text-sm text-chrome-dark">Agent autonomously categorizes and scopes learnings.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"clean up low-confidence memories"</code> <span class="font-serif text-sm text-chrome-dark">Prune uncertain learnings to reduce noise.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"what scopes are you using?"</code> <span class="font-serif text-sm text-chrome-dark">Introspect memory organization structure.</span> </div> </div> </div> </section><section class="mt-12"> <h2 class="font-mono text-xs font-bold uppercase tracking-[0.2em] text-brass mb-4">Maintenance</h2> <div class="grid gap-3"> <div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"any outdated memories?"</code> <span class="font-serif text-sm text-chrome-dark">Find learnings that may no longer be accurate.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"delete memories about [old project]"</code> <span class="font-serif text-sm text-chrome-dark">Targeted cleanup of stale context.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"consolidate duplicate learnings"</code> <span class="font-serif text-sm text-chrome-dark">Merge similar memories to reduce redundancy.</span> </div> </div> </div> </section><section class="mt-12"> <h2 class="font-mono text-xs font-bold uppercase tracking-[0.2em] text-brass mb-4">Scoping</h2> <div class="grid gap-3"> <div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"this is session-only, don&#39;t persist"</code> <span class="font-serif text-sm text-chrome-dark">Temporary memory that auto-expires.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"share this with all agents"</code> <span class="font-serif text-sm text-chrome-dark">Store in shared scope for cross-agent access.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"keep this private to us"</code> <span class="font-serif text-sm text-chrome-dark">Agent-scoped memory, isolated from others.</span> </div> </div> </div> </section><section class="mt-12"> <h2 class="font-mono text-xs font-bold uppercase tracking-[0.2em] text-brass mb-4">Debugging</h2> <div class="grid gap-3"> <div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"show me your recent learnings"</code> <span class="font-serif text-sm text-chrome-dark">List what&#39;s been stored in current session.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"why did you recall that?"</code> <span class="font-serif text-sm text-chrome-dark">Explain semantic match reasoning.</span> </div> </div><div class="bg-steel border border-brass/10 rounded-sm p-5 relative shadow-card group hover:border-brass/30 transition-colors"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-0 group-hover:opacity-30 transition-opacity"></div> <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"> <code class="font-mono text-sm text-chrome shrink-0">"what confidence do you have?"</code> <span class="font-serif text-sm text-chrome-dark">Surface confidence scores on memories.</span> </div> </div> </div> </section><section class="mt-16 mb-8"> <div class="bg-steel border border-brass/10 rounded-sm p-6 relative shadow-card"> <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brass to-transparent opacity-30"></div> <h3 class="font-serif font-semibold text-xl tracking-tight m-0 mb-3">Adding deja to your agent's system prompt</h3> <p class="font-serif font-light text-chrome-dark m-0 mb-4">
Include something like this in your agent's instructions:
</p> <div class="code-block bg-void-deep border border-brass/10 rounded-sm p-4 font-mono text-xs leading-relaxed text-chrome-dark overflow-x-auto whitespace-pre shadow-code">You have access to persistent memory via deja.
<span class="flag">To learn:</span> Call mem.learn(trigger, learning) after completing tasks.
<span class="flag">To recall:</span> Call mem.inject(context) before starting tasks.

Store learnings with appropriate scope:
- "shared" for knowledge useful to all agents
- "agent:name" for agent-specific patterns
- "session:id" for temporary context

Proactively organize and maintain your memories.</div> </div> </section>  </main> <!-- Bottom background --> <div class="absolute top-0 left-0 right-0 h-[80vh] bg-cover bg-center bg-no-repeat -z-10 pointer-events-none" style="background-image: url('/orb.jpg');"></div> <div class="absolute top-[80vh] left-0 right-0 h-[200px] bg-gradient-to-t from-void to-transparent -z-10 pointer-events-none"></div> <!-- Bottom background --> <div class="absolute bottom-0 left-0 right-0 h-[60vh] bg-cover bg-center bg-no-repeat -z-10 pointer-events-none" style="background-image: url('/connected.jpg');"></div> <div class="absolute bottom-[40vh] left-0 right-0 h-[200px] bg-gradient-to-b from-void to-transparent -z-10 pointer-events-none"></div> </body></html>